<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="assignment-admin">

    <template>

        <div>Spelling Assignment:</div>
        <div>Name:<input value="{{name::input}}" /></div>
        <div>
            <span>
                Effective Date {{dateFormat(effectiveDate, 'LL')}}<paper-button class="btn" on-tap="showDialog" raised>Change Date</paper-button>
            </span>
        </div>

        <paper-dialog id="dialog" class="paper-date-picker-dialog" modal on-iron-overlay-closed="dismissDialog">
            <paper-date-picker id="picker" date="{{date}}"></paper-date-picker>
            <div class="buttons">
                <paper-button dialog-dismiss>Cancel</paper-button>
                <paper-button dialog-confirm>OK</paper-button>
            </div>
        </paper-dialog>


        <template is="dom-repeat" items="{{words}}">
            <div># <span>{{index}}</span></div>
            <paper-input label="Spelling Word" value="{{item.word::input}}"></paper-input>
            <div><input value="{{item.word::input}}" /></div>
            <div><input value="{{item.sentence::input}}" /></div>
        </template>

        <div>{{name}}</div>

        <div>
            <span>Effective Date {{dateFormat(effectiveDate, 'LL')}}</span>

                <template is="dom-repeat" items="{{words}}">
                    <paper-item>
                        <paper-item-body hidden={{item.editing}} three-line class="layout vertical">
                            <div>YO {{item.editing}}</div>
                            <div># {{index}}</div>
                            <div>{{item.word}}</div>
                            <div secondary>{{item.sentence}}</div>
                        </paper-item-body>
                        <paper-item-body hidden={{!item.editing}} three-line class="layout vertical">
                            <paper-input label="Spelling Word" value="{{item.word::input}}"></paper-input>
                            <paper-input label="Example usage in sentence" value="{{item.sentence::input}}"></paper-input>
                        </paper-item-body>
                        <paper-fab hidden={{item.editing}} mini icon="editor:mode-edit" on-tap="doEdit"></paper-fab>
                        <paper-fab hidden={{!item.editing}} mini icon="icons:done" on-tap="doEdit"></paper-fab>
                    </paper-item>
                </template>
    </template>

    <script>
        Polymer({
            is: 'assignment-admin',
            ready: function () {
                this.name = "Sample Name";
                this.words = [
                    { word: "Rat", sentence: "The rat darted across the alleyway", editing: false },
                    { word: "Cat", sentence: "The cat sleeps all day long.", editing: false },
                    { word: "Fat", sentence: "You eat too much, you get fat.", editing: false }
                ];
                this.effectiveDate = new Date();
            },
            dateFormat: function(date, format) {
                return moment(date).format(format);
            },
            dismissDialog: function(event) {
                if (event.detail.confirmed) {
                    this.effectiveDate = this.$.picker.date;
                }
            },
            showDialog: function() {
                this.$.dialog.toggle();
            },
            doEdit: function (e) {
                var model = e.model;
                model.set('item.editing', !model.item.editing);
            }

        });
    </script>

</dom-module>
